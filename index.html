<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>タイピングの秋 - 焼き芋モード</title>
  <link rel="stylesheet" href="./style.css" />
  <script defer src="./script.js"></script>
</head>

<body>
  <main id="app" class="app" data-app-version="mvp-1">
    <!-- =========================
         トップ画面
    ========================== -->
    <section id="screen-home" class="screen--home" data-screen="home" aria-labelledby="home-title">
      <header class="home-header">
        <h1 id="home-title">タイピングの秋 🍁✍️</h1>
      </header>

      <div class="mode-card" data-mode="yakiimo">
        <h2 class="mode-title">焼き芋モード</h2>
        <p class="mode-desc">焼き芋にまつわる文章でタイピング！</p>

        <!-- 👑 ベストスコア -->
        <div class="bestscore" aria-label="ベストスコア">
          <div class="bestscore__title" aria-hidden="true">👑 ベストスコア</div>
          <div class="bestscore__value-line">
            <strong id="best-accuracy" data-field="bestAccuracy">--%</strong>
            <span class="bestscore__unit">完成度</span>
          </div>
        </div>

        <!-- ここからゲーム画面へ遷移 -->
        <div class="actions">
          <button id="btn-start-home" class="btn btn--primary" data-action="goto-game">
            プレイする
          </button>
          <!-- ベストスコアをリセット -->
          <button id="btn-reset-best" class="btn btn--secondary" data-action="reset-best" aria-label="ベストスコアをリセットする">
            ベストスコアをリセットする
          </button>
        </div>
      </div>
    </section>

    <!-- =========================
         ゲーム画面
         - 初期表示は「スペースキーでゲーム開始」オーバーレイのみ
         - 入力欄は置かず、keydownで判定（JS側で実装）
    ========================== -->
    <section id="screen-game" class="screen screen--game" data-screen="game" hidden aria-labelledby="game-title">
      <header class="game-header">
        <div class="game-mode" id="game-title">焼き芋モード</div>
        <div class="game-timer" aria-live="polite">
          <span class="timer-icon" aria-hidden="true">⏱</span>
          <strong id="timer" data-field="timer">0.0</strong><span class="timer-unit">秒</span>
        </div>
      </header>

      <!-- スペースキー開始オーバーレイ -->
      <div id="start-overlay" class="start-overlay" role="dialog" aria-modal="true"
        aria-labelledby="start-overlay-title">
        <p id="start-overlay-title" class="start-overlay__title">スペースキーでゲーム開始</p>
        <p class="start-overlay__sub">はじめると同時にタイマーが動きます</p>
      </div>

      <div class="game-board" aria-live="polite" aria-atomic="true">
        <!-- ローマ字行（タイプに応じて灰色／赤にJSで更新） -->
        <div id="romaji-line" class="romaji-line" aria-label="ローマ字ガイド"></div>

        <!-- 日本語の問題文（常に黒で表示） -->
        <div id="jp-sentence" class="jp-sentence" aria-label="問題文"></div>

        <!-- 焼き芋イラストの置き場 -->
        <div id="yakiimo-illustration" class="yakiimo-illustration">
          <img src="./assets/img/yakiimo.png" alt="焚き火で焼き芋のイラスト" decoding="async">
        </div>

        <!-- ★ タイピング演出の描画レイヤー -->
        <div id="typing-effects" class="typing-effects-layer" aria-hidden="true"></div>
      </div>

      <div class="restart-note" aria-hidden="true">
        <kbd>Esc</kbd>キーでリスタート
      </div>

    </section>

    <!-- =========================
         結果画面
    ========================== -->
    <section id="screen-result" class="screen screen--result" data-screen="result" hidden aria-labelledby="result-title">
      <header class="result-header">
        <h2 id="result-title">焼き芋モード</h2>
      </header>
    
      <div class="result-panel">
        <!-- 左：完成度 -->
        <div class="result-row">
          <span class="result-label">完成度</span>
          <strong id="result-accuracy" class="result-value" data-field="resultAccuracy">--%</strong>
        </div>
    
        <!-- 右：時間 -->
        <div class="result-row">
          <span class="result-label">焼き上がりにかかった時間</span>
          <strong id="result-time" class="result-value" data-field="resultTime">--秒</strong>
        </div>
    
        <!-- 下段中央：ひとこと（★ 新設：result-panel 内に配置） -->
        <div class="result-row result-row--hito">
          <span class="result-label">ひとこと</span>
          <p id="result-comment" class="result-comment" data-field="resultComment"></p>
        </div>
      </div>

      <div class="result-actions">
        <button id="btn-retry" class="btn btn--primary" data-action="retry">もう一度遊ぶ</button>
        <button id="btn-back-home" class="btn btn--ghost" data-action="back-home">トップへ戻る</button>
      </div>
      <div class="result-share">
        <button class="btn btn--share" data-action="share-x">結果をXで共有する</button>
      </div>
    </section>
  </main>

  <!-- 視覚的に隠すユーティリティ（CSSで .sr-only を定義） -->
  <div class="sr-only" aria-hidden="true"></div>
</body>

</html>
